var no_errors = <%= !@inquiry.errors.any? %>;
var search_type = '<%= @inquiry.query_type %>';
var view = '<%= view %>';

$("#search-errors").replaceWith("<%= j(render partial: 'search_errors', locals: { errors: @inquiry.errors }) %>");
$('#search-igdb-bar').on('input', function() {
    $("#search-errors").replaceWith("<%= j(render partial: 'search_errors', locals: { errors: [] }) %>");
});

cleanOffcanvas();

if (no_errors) {
    $("#search-results").html("<%= j(render partial:'results', locals: { view: view }) %>");
    $("#search-results").append("<%= j(content_tag :span, @inquiry.last_form.values.join(','), id: 'last-form') %>");
    $("#bar-history").html("<%= j(render partial:'records/bar_records') %>");
    activateSearchRecords();


    switch (view) {
        case 'list_view':
            break;
        case 'cover_view':
            fitNameInNoCover();
            morePlatforms();
            break;
        case 'panel_view':
            moreInfo();
            closeAllPanels();
            $('.g-drop').slideUp(0);
            break;
    }
}

$(function() {
    activateSearchToolbar(view, search_type);
    changeSearchView();
    showHideToolbar(false);
    clearSearchWait();
    changeTheme(false);
});
