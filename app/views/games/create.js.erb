// VARIABLES:
var game_id = '<%= @game_igdb_id %>';
var msg = '<%= @message %>';
var msg_pos = 'top-right';
var success = <%= !@errors.present? ? true : false %>;

if (msg) {
    UIkit.notification({
        message: $('<div/>').html(msg).text(),
        pos: msg_pos,
        timeout: 5000
    });
}

if (success == true) {
    // Hide form dropdown
    var drop_element = "#add-form-" + game_id;
    UIkit.dropdown(drop_element).hide();
    // Underline owned game on cover view
    var name_el = '#gs-' + game_id + ' .game-name span'
    $(name_el).addClass('owned');
    // Change add-form link
    var href = $('#add-' + game_id).attr('href');
    $('#add-' + game_id).attr('href', href.replace('false','true'));

} else {
    // Show errors
    var element = "#add-form-" + game_id + " .add-form-errors";
    $(element).html("<%= j(render partial: 'add_form_errors', locals: { errors: @errors }) %>");
    // Reset error upon input change
    resetFormErrors('add', game_id)
}

