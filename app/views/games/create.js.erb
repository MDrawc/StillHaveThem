var game_id = '<%= @game.igdb_id %>';
var form = '<%= @collection.form %>';
var msg_type = '<%= @message_type %>';
var success = <%= !@errors.present? ? true : false %>;

if (msg_type) {
    UIkit.notification({
        message: '<%= @message %>',
        status: msg_type,
        pos: 'top-right',
        timeout: 5000
    });
}

if (success) {
    if ((form === 'collection') || (form === 'custom')) {

        // hide form dropdown
        var drop_element = "#add-" + form + "-form-" + game_id;
        UIkit.dropdown(drop_element).hide();

        // add green mark to button
        var element = "#add-" + form + "-" + game_id;
        $(element).addClass('remove');

        // render games already in my collection
        var already = "#add-" + form + "-form-" + game_id + " .already-in";
        proxy = "<%= escape_javascript(render partial: 'static_pages/already_in_collection', locals: { collection: @collection, game_name: @game.name, igdb_id: @game.igdb_id }) %>"

        UIkit.util.on(drop_element, 'hidden', function () {
            $(already).html(proxy);
        });

    } else {
        var element = "#add-" + form + "-form-" + game_id;
        $(element).hide();
        element = element.replace("add", "remove");
        $(element).show();
    }
}

var element = "#add-" + form + "-form-" + game_id + " .add-form-errors";
$(element).html("<%= escape_javascript(render partial: 'add_form_errors', locals: { errors: @errors }) %>");
