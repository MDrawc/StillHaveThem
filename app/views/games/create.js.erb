var view = $('#view-container').attr('view');

<% if @errors.empty? %>
    UIkit.notification({
            message: $('<div/>').html('<%= @message %>').text(),
            pos: 'top-right',
            timeout: 5000
    });

    var game_id = '<%= @game_igdb_id %>';
    var uniq_results = '<%= @x_id %>' === game_id;

    Cookies.set('last_coll', '<%= @collection.id %>')
    switch (view) {
        case 'covers':
            UIkit.dropdown('#f-lone').hide();
            if (uniq_results) {
                var name_el = $('#gs-' + game_id).find('.game-name span');
            } else {
                var name_el = $('[id^=gs-' + game_id + '-]').find('.game-name span');
            }
            name_el.addClass('owned');
            break;
        case 'panels':
            UIkit.dropdown('#f-lone').hide();
            break;
        default:
            UIkit.modal("#t-ops").hide();
    }

    if (uniq_results) {
        var add_links = $('#add-' + game_id);
    } else {
        var add_links = $('[id^=add-' + game_id + '-]');
    }

    add_links.each(function() {
        var href = $(this).attr('href');
        $(this).attr('href', href.replace('false', 'true'));
        $(this).attr('uk-icon', 'check');
    });
<% else %>
    var errors = "<%= j(render partial: 'add_form_errors', locals: { errors: @errors }) %>";
    switch (view) {
        case 'list':
            $("#t-ops").find(".add-form-errors").html(errors);
            resetFormErrors(true)
            break;
        default:
            $("#f-lone").find(".add-form-errors").html(errors);
            resetFormErrors(false)
    }
<% end %>
