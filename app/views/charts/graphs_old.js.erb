var needs_platform = <%= @needs_platform %>;
var stats = <%= raw @charts_data[:stats] %>;
var overall = <%= @overall %>;

var $li_by_format = $('#li-by-format');
var $li_by_platform = $('#li-by-platform');
var $li_by_collection = $('#li-by-collection');

var $chg_elements = $('.chg-over');
var overall_text = ['Account created:', 'Total number of games:', 'Largest collection:'];
var single_coll_text = ['Created:', 'Requires platform, format:', 'Number of games:'];

<% if @overall %>
  <% by_format_options = { data: @charts_data[:chart_1], legend: 'right', height: '200px', right_p: 0 } %>
  var in_comparison = "<%= j(render partial: 'by_format', locals: by_format_options) %>";
  var by_collection = "<%= j(render partial: 'by_platform', locals: { data: @charts_data[:chart_2] }) %>";
  var by_platform = "<%= j(render partial: 'by_platform', locals: { data: @charts_data[:chart_3] }) %>";
<% else %>
  var in_comparison = "<%= j(render partial: 'in_comparison', locals: { data: @charts_data[:chart_1] }) %>";
  <% if @needs_platform %>
    <% by_format_options = { data: @charts_data[:chart_2], legend: 'left', height: '250px', right_p: 15 } %>
    var by_format = "<%= j(render partial: 'by_format', locals: by_format_options ) %>";
    var by_platform = "<%= j(render partial: 'by_platform', locals: { data: @charts_data[:chart_3] }) %>";
  <% end %>
<% end %>






$('#in-comparison').html(in_comparison);

if (overall) {

    $chg_elements.each(function(i) {
        $(this).text(overall_text[i]);
    });
    $li_by_collection.show();
    $li_by_platform.show();
    $li_by_format.hide();

    $('#by-platform').html(by_platform);
    $('#by-collection').html(by_collection);

} else {

    $chg_elements.each(function(i) {
        $(this).text(single_coll_text[i]);
    });
    $li_by_collection.hide();

    if (needs_platform) {
        $li_by_format.show();
        $li_by_platform.show();

        $('#by-format').html(by_format);
        $('#by-platform').html(by_platform);
    } else {
        $li_by_format.hide();
        $li_by_platform.hide();
    }
}
