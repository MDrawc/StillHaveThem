$('#side-menu').find("li.active").removeClass('active');
$("#mc-<%= @collection.id %>").addClass('active');
var view = '<%= @view %>';
var refresh = <%= @refresh %>;
var no_games = <%= @games.empty? %>;

if (refresh && view === 'panels') {
    var ids = getIdsOfOpenPanels();
}

cleanOffcanvas();

$("#big-c").html("<%= j(render partial: 'my_games', locals: { collection: @collection, view: @view, shared: shared }) %>");

switch (view) {
    case 'list':
        listHover();
        break;
    case 'covers':
        underCover(<%= shared %>);
        fitNameInNoCover();
        break;
    case 'panels':
        if (refresh) {
            openPanels(ids);
        }
        closeAllPanels()
        moreInfo();
        break;
}

filterGames();
showHideToolbar(<%= shared %>);
modifyToolbar(view);
toggleEditMenu();
changeMyView(<%= shared %>);
changeTheme(<%= shared %>);
hideShowBackToTop();

if (no_games) {
    disableSortLinks();
}

$('#q_name_dev_cont').focus();
