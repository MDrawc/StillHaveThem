var view = '<%= @view %>';

if (view === 'panels') {
    var ids = getIdsOfOpenPanels();
}

cleanOffcanvas();

$(".my-games").html('<%= j(render partial: "my_games/#{ @view }", locals: { collection: @collection, shared: shared }) %>');

$('#gsview').attr('value', view);
$('#r-q').text(<%= raw query %>);
$('#r-s').text('<%= sort %>');

switch (view) {
    case 'list':
        listHover();
        break;
    case 'covers':
        underCover(<%= shared %>);
        fitNameInNoCover();
        break;
    case 'panels':
        closeAllPanels();
        openPanels(ids);
        moreInfo();
        break;
}

modifyToolbar(view);

$('#q_name_dev_cont').focus();
