var msg_pos = 'top-right'

// Notifications position depends on offcanvas position
if ($('.uk-offcanvas-container').length) {
    var offc_class = $('.uk-offcanvas-container').attr('class');

    if (offc_class.includes('uk-offcanvas-flip')) {
        msg_pos = 'top-left';
    }
}

UIkit.notification({
    message: $('<div/>').html('<%= @message %>').text(),
    status: 'warning',
    pos: msg_pos,
    timeout: 5000
});

<% if @success %>
var data = { type: 'refresh' };

    if ($('#r-q').text().length != 0 && $('#r-s').text().length != 0) {
        search = $('#r-q').text().split(',');
        data['q'] = {
            name_dev_cont: search[0],
            plat_cont: search[1],
            physical_eq: search[2],
            s: $('#r-s').text()
        };
    } else if ($('#r-q').text().length != 0) {
        search = $('#r-q').text().split(',');
        data['q'] = {
            name_dev_cont: search[0],
            plat_cont: search[1],
            physical_eq: search[2]
        };
    } else if ($('#r-s').text().length != 0) {
        data['q'] = {
            s: $('#r-s').text()
        };
    }

if ($('.pr em.current').length != 0) {
    var current_page = $('.pr em.current').text();
    console.log(current_page);
    var num_of_games = $('.g-panel').length;
    if (num_of_games == 1) {
        current_page -= 1;
    }
    data['page'] = current_page;
}

$.ajax({
    url: '/collections/<%= @collection.id %>',
    data: data
});

<% end %>
