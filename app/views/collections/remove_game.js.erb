var msg_pos = 'top-right'

// Notifications position depends on offcanvas position
if ($('.uk-offcanvas-container').length) {
    var offc_class = $('.uk-offcanvas-container').attr('class');

    if (offc_class.includes('uk-offcanvas-flip')) {
        msg_pos = 'top-left';
    }
}

UIkit.notification({
    message: $('<div/>').html('<%= @message %>').text(),
    status: 'warning',
    pos: msg_pos,
    timeout: 5000
});

<% if @success %>
    if ($('em.current').length == 0) {
        $.ajax({
            url: '/collections/<%= @collection.id %>',
            data: { type: 'refresh' }
        });
    } else {
        var current_page = $('em.current').text();
        var num_of_games = $('.g-panel').length;
        if (num_of_games == 1) {
            current_page -= 1;
        }

        $.ajax({
            url: '/collections/<%= @collection.id %>',
            data: {
                page: current_page, type: 'refresh'
            }
        });
    }
<% end %>
