var success = <%= @success %>;
var remove_underline = <%= @remove_underline %>;
var msg_pos = 'top-right'

UIkit.notification({
    message: $('<div/>').html('<%= @message %>').text(),
    status: 'warning',
    pos: msg_pos,
    timeout: 5000
});

if (success) {
    var game_id = '<%= @game.igdb_id %>';
    var x_id = '<%= @x_id %>';

    var already = "#add-form-" + x_id + " .already-in";
    var proxy = "<%= j(render partial: 'search/already_in', locals: { game_name: @game.name, igdb_id: @game.igdb_id, x_id: @x_id }) %>";
    $(already).html(proxy);

    // Reseting error status upon succesful remove
    var element = '#add-form-' + x_id + ' .add-form-errors';
    $(element).html('');

    // Remove underline from removed game and change add-form link
    if (remove_underline) {

        var name_el = $('[id^=gs-' + game_id + ']').find('.game-name span');
        name_el.removeClass('owned');

        // Change add-form link
        $('[id^=add-' + game_id + ']').each(function() {
            var href = $(this).attr('href');
            $(this).attr('href', href.replace('true', 'false'));
        });

    }
}

